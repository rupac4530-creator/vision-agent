;/*FB_PKG_DELIM*/

__d("WAWebNewsletterVideoPlayLoggingContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({finishCount:1,setFinishCount:function(){}});l.default=u}),98);
__d("WAWebDomPlayVideo",["Promise"],(function(t,n,r,o,a,i){var e;function l(t){if(t.__playPromise)return t.__playPromise;var r=new(e||(e=n("Promise")))(function(e,n){function r(n){t.removeEventListener("playing",r),t.removeEventListener("error",o),(!t.videoHeight||!t.videoWidth)&&r(n),delete t.__playPromise,e()}function o(e){t.removeEventListener("playing",r),t.removeEventListener("error",o),delete t.__playPromise,n(e)}t.addEventListener("playing",r),t.addEventListener("error",o);var a=t.play();s(a)&&(t.removeEventListener("playing",r),t.removeEventListener("error",o),a.then(function(){delete t.__playPromise,e()}).catch(function(e){delete t.__playPromise,n(e)}))});return t.__playPromise=r,r}function s(e){return e&&typeof e.then=="function"}i.default=l}),66);
__d("WAWebWamEnumPlaybackOriginType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONVERSATION:1,STATUS:2,CHANNELS:3});i.PLAYBACK_ORIGIN_TYPE=e}),66);
__d("WAWebWamEnumPlaybackStateType",[],(function(t,n,r,o,a,i){var e=Object.freeze({IDLE:1,READY_PLAY:2,READY_PAUSE:3,BUFFERING:4,OUTSIDE:5,ENDED:6,ERROR:7});i.PLAYBACK_STATE_TYPE=e}),66);
__d("WAWebMediaStreamPlaybackWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MediaStreamPlayback:[1584,{bytesDownloadedStart:[4,e.TYPES.NUMBER],bytesTransferred:[5,e.TYPES.NUMBER],didPlay:[15,e.TYPES.BOOLEAN],forcedPlayCount:[12,e.TYPES.INTEGER],initialBufferingT:[7,e.TYPES.TIMER],mediaSize:[2,e.TYPES.NUMBER],mediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],overallPlayT:[10,e.TYPES.TIMER],overallT:[1,e.TYPES.TIMER],playbackCount:[14,e.TYPES.INTEGER],playbackError:[17,e.TYPES.INTEGER],playbackOrigin:[16,o("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE],playbackState:[11,o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE],seekCount:[13,e.TYPES.INTEGER],statusId:[18,e.TYPES.STRING],totalRebufferingCount:[9,e.TYPES.INTEGER],totalRebufferingT:[8,e.TYPES.TIMER],videoDuration:[6,e.TYPES.INTEGER]},[1,1,1],"regular"]},{MediaStreamPlayback:[]});l.MediaStreamPlaybackWamEvent=s}),98);
__d("useWAWebMediaStreamPlaybackMetric",["WAWebMediaStreamPlaybackWamEvent","WAWebPipVideoStreaming","WAWebWamEnumMediaType","WAWebWamEnumPlaybackOriginType","WAWebWamEnumPlaybackStateType","react","useLazyRef","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.experimental_useEffectEvent,c=s.useEffect,d=s.useRef;function m(e){return new(o("WAWebMediaStreamPlaybackWamEvent")).MediaStreamPlaybackWamEvent({playbackOrigin:e,mediaType:o("WAWebWamEnumMediaType").MEDIA_TYPE.VIDEO,didPlay:!1,playbackState:o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.IDLE})}function p(e,t,n,a){a===void 0&&(a=o("WAWebWamEnumPlaybackOriginType").PLAYBACK_ORIGIN_TYPE.CONVERSATION);var i=d(!0),l=r("useLazyRef")(function(){return m(a)}),s=u(function(e){var t=function(){e.commit(),i.current=!0,l.current=m(a),window.removeEventListener("unload",t)};return t});c(function(){if(!(e==null||!e.startsWith(o("WAWebPipVideoStreaming").VIDEO_STREAM_URL))){var t=l.current,n=s(t);return window.addEventListener("unload",n),n}},[e,l]);var p=r("useWAWebStableCallback")(function(e){t.current&&(l.current.videoDuration=Math.floor(t.current.duration)),n.onDurationChange==null||n.onDurationChange(e)}),_=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY,l.current.didPlay||(l.current.didPlay=!0),n.onPlaying==null||n.onPlaying()}),f=r("useWAWebStableCallback")(function(e){l.current.playbackState===o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PLAY&&(l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE),n.onPause==null||n.onPause(e)}),g=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.BUFFERING,i.current?l.current.startInitialBufferingT():l.current.startTotalRebufferingT(),n.onWaiting==null||n.onWaiting(e)}),h=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.READY_PAUSE,i.current?(l.current.markInitialBufferingT(),i.current=!1):l.current.markTotalRebufferingT(),n.onCanPlay==null||n.onCanPlay(e)}),y=r("useWAWebStableCallback")(function(e){l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ENDED,n.onEnded==null||n.onEnded(e)}),C=r("useWAWebStableCallback")(function(e){var r,a,i;l.current.playbackState=o("WAWebWamEnumPlaybackStateType").PLAYBACK_STATE_TYPE.ERROR;var s=(r=(a=(i=t.current)==null||(i=i.error)==null?void 0:i.code)!=null?a:e.code)!=null?r:null;s!=null&&(l.current.playbackError=s),n.onError==null||n.onError(e)});return{mediaStreamPlaybackMetricRef:l,wrappedProps:{onDurationChange:p,onPlaying:_,onWaiting:g,onCanPlay:h,onEnded:y,onError:C,onPause:f}}}l.useMediaStreamPlaybackMetric=p}),98);
__d("useWAWebBaseVideoCommon",["Promise","WAAbortError","WALogger","WAWebDomPlayVideo","WAWebPttAudioChannels","WAWebUA","WAWebVideoPlaybackSpeed","asyncToGeneratorRuntime","err","react","useWAWebMediaStreamPlaybackMetric","useWAWebOnUnmount","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=["onPlaying"],m,p,_=p||(p=o("react")),f=_.useEffect,g=_.useRef;function h(t,a,i,l,p){var _,h=g(0),y=g(null),C=g(null),b=o("useWAWebMediaStreamPlaybackMetric").useMediaStreamPlaybackMetric(i,y,l),v=b.wrappedProps,S=v.onPlaying,R=babelHelpers.objectWithoutPropertiesLoose(v,d),L=(_=r("useWAWebStableCallback"))(function(e){var t=y.current;t&&(t.paused||t.videoHeight>0&&t.videoWidth>0&&(S==null||S(),p==null||p.onPlayingExtra==null||p.onPlayingExtra(y)))}),E=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=y.current;if(!t)return(m||(m=n("Promise"))).reject(r("err")("cannot play unmounted video"));if(!t.paused)return(m||(m=n("Promise"))).resolve();t.removeEventListener("playing",L);try{yield r("WAWebDomPlayVideo")(t),t.addEventListener("playing",L),L()}catch(n){var a,i,l,u;if(t.addEventListener("playing",L),n.name===o("WAAbortError").ABORT_ERROR){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected w/ AbortError: ",", error code: ",""])),n.message,n.code);return}var c=(a=(i=y.current)==null||(i=i.error)==null?void 0:i.message)!=null?a:"",d=(l=(u=y.current)==null||(u=u.error)==null?void 0:u.code)!=null?l:"";o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["video.play() promise rejected: "," The error code is ","."])),c,d),R.onError==null||R.onError(n)}});return function(){return t.apply(this,arguments)}})(),k=_(function(){E()}),I=_(function(){var e=y.current;if((e==null?void 0:e.paused)!==!0){var t;e==null||e.pause(),p==null||p.onPauseExtra==null||p.onPauseExtra((t=e==null?void 0:e.currentTime)!=null?t:0)}}),T=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.volume)!=null?e:0}),D=_(function(e){y.current&&(y.current.volume=e)}),x=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.muted)!=null?e:!1}),$=_(function(){return!1}),P=_(function(e){y.current&&(y.current.muted=e)}),N=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.paused)!=null?e:!0}),M=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.currentTime)!=null?e:0}),w=_(function(e){y.current&&(y.current.currentTime=e)}),A=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.duration)!=null?e:0}),F=_(function(e){y.current&&(y.current.duration=e)}),O=_(function(){var e=y.current;e&&(e.currentTime=0,I())}),B=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.playbackRate)!=null?e:o("WAWebVideoPlaybackSpeed").DEFAULT_VIDEO_PLAYBACK_RATE}),W=_(function(e){y.current&&(y.current.playbackRate=e)}),q=_(function(){var e,t;return(e=(t=y.current)==null?void 0:t.buffered)!=null?e:null}),U=_(function(){return y.current}),V=function(t){var e=y.current;if(e&&(e.removeEventListener("playing",V),!e.videoHeight||!e.videoWidth)){I(),k();var n=6;h.current<n&&h.current++;var r;h.current>1&&h.current<n&&(r="the height and width of the video is not zero, count (larger than 1): "+h.current),h.current>=n&&(r="the height and width of the video is not zero, count larger than "+h.current),r!=null&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed! ",""])),r).sendLogs("base-video-non-zero-height-and-width")}},H=_(function(e,n){if(t===!0){e.removeEventListener("playing",V),e.addEventListener("playing",V);var r=e.srcObject;(r!=null||n&&e.paused)&&k()}}),G=_(function(e){var n;e!==y.current&&((n=y.current)==null||n.removeEventListener("playing",L),C.current==null||C.current(),y.current=e,e!=null&&(C.current=o("WAWebPttAudioChannels").MainAudioChannel.registerMedia(e),"srcObject"in e&&a?e.srcObject=a:e.src||o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["srcObject is not supported in video tag while src is not set."]))),e.addEventListener("playing",L),t===!0&&H(e,o("WAWebUA").UA.isGecko||o("WAWebUA").UA.isSafari)))});return f(function(){var e=y.current;e!=null&&t===!0&&H(e,!0)},[t]),r("useWAWebOnUnmount")(function(){C.current==null||C.current()}),{videoRef:y,autoPlayErrorCountRef:h,unregisterFromAudioChannelRef:C,wrappedProps:R,handlePlaying:L,play:k,pause:I,getAudioDisabled:$,getVolume:T,setVolume:D,getMuted:x,setMuted:P,getPaused:N,getCurrentTime:M,setCurrentTime:w,getDuration:A,setDuration:F,pauseAndReset:O,getPlaybackRate:B,setPlaybackRate:W,getBuffered:q,underlyingVideo:U,setRefVideo:G}}l.default=h}),98);
__d("WAWebWamEnumVideoPlayOrigin",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONVERSATION:1,GALLERY_PICKER:2,STARRED_MESSAGES:3,MEDIA_VIEW_PAGER:4,OTHER_ORIGIN:5,CHANNELS:6,STATUS:7});i.VIDEO_PLAY_ORIGIN=e}),66);
__d("WAWebWamEnumVideoPlayResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:1,ERROR_PLAYER:2,ERROR_VIDEO_TRACK:3,ERROR_AUDIO_TRACK:4,ERROR_DOWNLOAD_FAILED:5});i.VIDEO_PLAY_RESULT=e}),66);
__d("WAWebWamEnumVideoPlayType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FILE:1,STREAM:2,SENT:3});i.VIDEO_PLAY_TYPE=e}),66);
__d("WAWebChannelsVideoPlayWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ChannelsVideoPlay:[6556,{autoPlayT:[1,e.TYPES.INTEGER],cid:[2,e.TYPES.STRING],finishCount:[13,e.TYPES.INTEGER],height:[3,e.TYPES.INTEGER],postId:[4,e.TYPES.STRING],videoDuration:[5,e.TYPES.INTEGER],videoInitialBufferingT:[6,e.TYPES.TIMER],videoPlayOrigin:[7,o("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN],videoPlayResult:[8,o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT],videoPlayT:[9,e.TYPES.INTEGER],videoPlayType:[10,o("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE],videoSize:[11,e.TYPES.NUMBER],watchingModule:[14,e.TYPES.STRING],width:[12,e.TYPES.INTEGER]},[1,1,1],"regular"]},{ChannelsVideoPlay:[]});l.ChannelsVideoPlayWamEvent=s}),98);
__d("useWAWebNewsletterVideoPlayMetric",["WAWebChannelsVideoPlayWamEvent","WAWebMsgGetters","WAWebWamEnumVideoPlayOrigin","WAWebWamEnumVideoPlayResult","WAWebWamEnumVideoPlayType","react","useLazyRef","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.experimental_useEffectEvent,c=s.useEffect,d=s.useRef;function m(e,t,n){return new(o("WAWebChannelsVideoPlayWamEvent")).ChannelsVideoPlayWamEvent({cid:t,postId:n,videoPlayOrigin:o("WAWebWamEnumVideoPlayOrigin").VIDEO_PLAY_ORIGIN.CHANNELS,videoPlayType:o("WAWebWamEnumVideoPlayType").VIDEO_PLAY_TYPE.STREAM,videoPlayResult:o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK,watchingModule:o("WAWebMsgGetters").isNewsletterMsgWithMusic(e)?"whatsapp_channels_non_ugc":"whatsapp_channels"})}function p(e,t,n){var a,i=d(!0),l=r("useLazyRef")(function(){return m(e,t,n)}),s=u(function(r){var o=function(){r.commit(),i.current=!0,l.current=m(e,t,n),window.removeEventListener("unload",o)};return o});c(function(){var e=l.current,t=s(e);return window.addEventListener("unload",t),t},[l]);var p=(a=r("useWAWebStableCallback"))(function(e){var t,n,r,a,i,s;l.current.videoPlayResult=o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.OK;var u=(t=(n=e.current)==null?void 0:n.videoHeight)!=null?t:0,c=(r=(a=e.current)==null?void 0:a.videoWidth)!=null?r:0;l.current.height=u,l.current.width=c,l.current.videoDuration=Math.floor((i=(s=e.current)==null?void 0:s.duration)!=null?i:0)}),_=a(function(e){var t;l.current.videoPlayT=((t=l.current.videoPlayT)!=null?t:0)+Math.floor(e)}),f=a(function(){i.current&&l.current.startVideoInitialBufferingT()}),g=a(function(){i.current&&(l.current.markVideoInitialBufferingT(),i.current=!1)}),h=a(function(e,t){var n,r;l.current.finishCount=t;var o=((n=(r=e.current)==null?void 0:r.duration)!=null?n:0)*t;l.current.videoPlayT=Math.floor(o)}),y=a(function(e){var t,n,r=(t=(n=e.current)==null||(n=n.error)==null?void 0:n.code)!=null?t:null;r!=null&&(l.current.videoPlayResult=o("WAWebWamEnumVideoPlayResult").VIDEO_PLAY_RESULT.ERROR_PLAYER)});return{channelsVideoPlayRef:l,videoProps:{onChannelVideoPlaying:p,onChannelVideoPause:_,onChannelVideoWaiting:f,onChannelVideoCanPlay:g,onChannelVideoEnded:h,onChannelVideoError:y}}}l.useWAWebNewsletterVideoPlayMetric=p}),98);
__d("WAWebBaseNewsletterVideo.react",["WAWebFrontendMsgGetters","WAWebNewsletterVideoPlayLoggingContext","react","useWAWebBaseVideoCommon","useWAWebCanPlaybackAudio","useWAWebNewsletterVideoPlayMetric","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e=["autoPlay","children","className","msg","ref","srcObject"],s=["videoCallbacks"],u,c;function d(e){if(e==null)throw new TypeError("Cannot destructure "+e)}var m=c||(c=o("react")),p=u||(u=r("react")),_=m.useContext,f=m.useImperativeHandle;function g(t){var n,a=t.autoPlay,i=t.children,l=t.className,u=t.msg,c=t.ref,m=t.srcObject,g=babelHelpers.objectWithoutPropertiesLoose(t,e),h=g.videoCallbacks,y=babelHelpers.objectWithoutPropertiesLoose(g,s),C=_(r("WAWebNewsletterVideoPlayLoggingContext")),b=C.finishCount,v=C.setFinishCount,S=o("WAWebFrontendMsgGetters").getChat(u).id.toString().replace(/@.*/,""),R=(n=u.serverId)!=null?n:0,L=o("useWAWebCanPlaybackAudio").useCanPlaybackAudio(u),E=o("useWAWebNewsletterVideoPlayMetric").useWAWebNewsletterVideoPlayMetric(u,S,R.toString()),k=babelHelpers.extends({},(d(E.videoProps),E.videoProps)),I=r("useWAWebBaseVideoCommon")(a,m,g.src,y,{onPlayingExtra:function(t){k.onChannelVideoPlaying==null||k.onChannelVideoPlaying(t)},onPauseExtra:function(t){k.onChannelVideoPause==null||k.onChannelVideoPause(t)}}),T=I.getAudioDisabled,D=I.getBuffered,x=I.getCurrentTime,$=I.getDuration,P=I.getMuted,N=I.getPaused,M=I.getPlaybackRate,w=I.getVolume,A=I.pause,F=I.pauseAndReset,O=I.play,B=I.setCurrentTime,W=I.setDuration,q=I.setMuted,U=I.setPlaybackRate,V=I.setRefVideo,H=I.setVolume,G=I.underlyingVideo,z=I.videoRef,j=I.wrappedProps,K=r("useWAWebStableCallback")(function(){return L?T():!0}),Q=r("useWAWebStableCallback")(function(){return L?P():!0}),X=r("useWAWebStableCallback")(function(e){q(L?e:!0)}),Y=r("useWAWebStableCallback")(function(){k.onChannelVideoWaiting==null||k.onChannelVideoWaiting()}),J=r("useWAWebStableCallback")(function(){k.onChannelVideoCanPlay==null||k.onChannelVideoCanPlay()}),Z=r("useWAWebStableCallback")(function(){k.onChannelVideoError==null||k.onChannelVideoError(z)}),ee=r("useWAWebStableCallback")(function(){v(b+1),k.onChannelVideoEnded==null||k.onChannelVideoEnded(z,b)});return f(c,function(){return{getAudioDisabled:K,play:O,pause:A,getPaused:N,getCurrentTime:x,setCurrentTime:B,getDuration:$,setDuration:W,getVolume:w,setVolume:H,getMuted:Q,setMuted:X,getPlaybackRate:M,setPlaybackRate:U,getBuffered:D,underlyingVideo:G,pauseAndReset:F,onWaiting:Y,canPlay:J,end:ee,onError:Z}},[K,O,A,N,x,B,$,W,w,H,Q,X,M,U,D,G,F,Y,J,ee,Z]),p.jsx("video",babelHelpers.extends({},h,{ref:V,autoPlay:g.src!=null?a:void 0,className:l!=null?l:"x1lliihq xh8yej3 x5yr21d"},y,j,{muted:!L||y.muted===!0,children:i}))}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("WAWebBaseVideo.react",["WAWebNoop","react","useWAWebBaseVideoCommon"],(function(t,n,r,o,a,i,l){var e=["autoPlay","children","className","ref","srcObject"],s=["videoCallbacks"],u,c,d=c||(c=r("react")),m=(u||(u=o("react"))).useImperativeHandle;function p(t){var n,o=t.autoPlay,a=t.children,i=t.className,l=t.ref,u=t.srcObject,c=babelHelpers.objectWithoutPropertiesLoose(t,e),p=c.videoCallbacks,_=babelHelpers.objectWithoutPropertiesLoose(c,s),f=r("useWAWebBaseVideoCommon")(o,u,c.src,_,void 0),g=f.getAudioDisabled,h=f.getBuffered,y=f.getCurrentTime,C=f.getDuration,b=f.getMuted,v=f.getPaused,S=f.getPlaybackRate,R=f.getVolume,L=f.pause,E=f.pauseAndReset,k=f.play,I=f.setCurrentTime,T=f.setDuration,D=f.setMuted,x=f.setPlaybackRate,$=f.setRefVideo,P=f.setVolume,N=f.underlyingVideo,M=f.wrappedProps,w=n=r("WAWebNoop"),A=n,F=n,O=n;return m(l,function(){return{play:k,pause:L,getAudioDisabled:g,getPaused:v,getCurrentTime:y,setCurrentTime:I,getDuration:C,setDuration:T,getVolume:R,setVolume:P,getMuted:b,setMuted:D,getPlaybackRate:S,setPlaybackRate:x,getBuffered:h,underlyingVideo:N,pauseAndReset:E,end:w,canPlay:F,onError:O,onWaiting:A}},[k,L,g,v,y,I,C,T,R,P,b,D,S,x,h,N,E,w,F,O,A]),d.jsx("video",babelHelpers.extends({},p,{ref:$,autoPlay:c.src!=null?o:void 0,className:i!=null?i:"x1lliihq xh8yej3 x5yr21d"},_,M,{children:a}))}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("WAWebBaseVideoNewsletterContextProvider",["WAWebNewsletterVideoPlayLoggingContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=e.children,n=d(1),o=n[0],a=n[1],i=c(function(){return{finishCount:o,setFinishCount:a}},[o,a]);return s.jsx(r("WAWebNewsletterVideoPlayLoggingContext").Provider,{value:i,children:t})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("unsafeCast",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.default=e}),66);
__d("WAWebPipUrlVideoTag.react",["WAWebBaseNewsletterVideo.react","WAWebBaseVideo.react","WAWebBaseVideoNewsletterContextProvider","WAWebDebounce","WAWebMsgGetters","WAWebNewsletterGatingUtils","WAWebUserPrefsGeneral","WAWebVideoPlayerSurface.react","WAWebVideoPlayerX.react","react","unsafeCast","useMergeRefs","useWAWebOnUnmount","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=o("react")),d=s||(s=r("react")),m=c.useEffect,p=c.useRef,_=c.useState,f=r("WAWebDebounce")(function(e,t){o("WAWebUserPrefsGeneral").setMediaVolumeSettings(e,t)},500);function g(t){var n,a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.onError,s=i.onLoadedMetadata,u=i.onPlaying,c=i.onProgress,g=i.onTimeUpdate,h=i.onVolumeChange,y=i.startTime,C=p(null),b=r("useMergeRefs")(a,C),v=_(!1),S=v[0],R=v[1];r("useWAWebOnUnmount")(function(){f.flush()});var L=(n=r("useWAWebStableCallback"))(function(e){var t,n=C.current;if((t=i.callbacks)==null||t.onVolumeChange==null||t.onVolumeChange(e),n){var r=n.getVolume(),o=n.getMuted(),a=(n.getAudioDisabled==null?void 0:n.getAudioDisabled())===!0;a||f(r,o),h({volume:r,muted:o})}}),E=n(function(e){if(!S&&e){var t;(t=i.callbacks)==null||t.onPlaying==null||t.onPlaying(e),R(!0)}u()}),k=n(function(){C.current&&typeof y=="number"&&C.current.setCurrentTime(y)}),I=n(function(e){if(y!=null){var t;k(),(t=i.callbacks)==null||t.onLoadedMetadata(e)}var n={duration:e.currentTarget.duration,volume:e.currentTarget.volume,muted:e.currentTarget.muted,videoWidth:e.currentTarget.videoWidth,videoHeight:e.currentTarget.videoHeight};s(n,e)}),T=function(t){if(C.current){var e=C.current.getBuffered(),n=[];if(e)for(var r=0;r<e.length;r++)n.push([e.start(r),e.end(r)]);c(n)}},D=function(t){var e=t.currentTarget.currentTime;g(e)},x=function(t){var e,n,r=(e=(n=C.current)==null||(n=n.underlyingVideo())==null?void 0:n.error)!=null?e:null;if(r==null&&t.code!=null){var o;l(t.code),i.onError(),(o=i.callbacks)==null||o.onError(t);return}l(r==null?void 0:r.code,r==null?void 0:r.message)},$=n(function(e){var t=C.current;t&&(f(e.volume,e.muted),h(e))}),P=n(function(){S||R(!0),u()}),N=n(function(e){y!=null&&k();var t=r("unsafeCast")({currentTarget:{duration:e.duration,volume:e.volume,muted:e.muted,videoWidth:e.videoWidth,videoHeight:e.videoHeight}});s(e,t)}),M=n(function(e){g(e)}),w=n(function(e,t){l(e,t)}),A=n(function(){var e;(e=C.current)==null||e.end(),i.onEnded()}),F=n(function(){var e;(e=C.current)==null||e.canPlay(),i.onCanPlay==null||i.onCanPlay()}),O=n(function(){var e;(e=C.current)==null||e.onWaiting(),i.onWaiting==null||i.onWaiting()}),B=function(t){var e;(e=C.current)==null||e.end(),i.onEnded()},W=function(t){var e;(e=C.current)==null||e.canPlay(),i.onCanPlay==null||i.onCanPlay(t)},q=function(t){var e;(e=C.current)==null||e.onWaiting(),i.onWaiting==null||i.onWaiting(t)};m(function(){k()},[y,k]),m(function(){var e=C.current;if(e){var t=o("WAWebUserPrefsGeneral").getMediaVolumeSettings(),n=t.muted,r=t.volume;r!=null&&e.setVolume(r),e.setMuted(n)}},[]);var U=i.msg,V=U!=null&&o("WAWebMsgGetters").getIsNewsletterMsg(U)&&o("WAWebNewsletterGatingUtils").isNewsletterVideoPlayLoggingEnabled();return U!=null&&V&&o("WAWebNewsletterGatingUtils").isCometVideoPlayerEnabled()?d.jsx(r("WAWebVideoPlayerX.react"),{autoplayEnabled:i.autoPlay,loggingConfig:i.loggingConfig,loggingToSNAPLAdditionalData:i.loggingToSNAPLAdditionalData,mediaId:i.mediaId,poster:i.poster,src:i.url,subOrigin:i.subOrigin,children:d.jsx(r("WAWebVideoPlayerSurface.react"),{ref:b,onPause:i.onPause,onPlaying:P,onEnded:A,onError:w,onTimeUpdate:M,onLoadedMetadata:N,onVolumeChange:$,onCanPlay:F,onWaiting:O})}):U!=null&&V?d.jsx(r("WAWebBaseVideoNewsletterContextProvider"),{children:d.jsx(r("WAWebBaseNewsletterVideo.react"),{msg:U,ref:b,src:i.url,poster:i.poster,className:i.className,onVolumeChange:L,onEnded:B,onError:x,onPause:i.onPause,onPlaying:E,onProgress:T,onTimeUpdate:D,onLoadedMetadata:I,autoPlay:i.autoPlay,onCanPlay:W,onWaiting:i.onWaiting,onLoadedData:i.onLoadedData,videoCallbacks:i.callbacks,children:i.children})}):d.jsx(r("WAWebBaseVideo.react"),{ref:b,src:i.url,poster:i.poster,className:i.className,onVolumeChange:L,onEnded:B,onError:x,onPause:i.onPause,onPlaying:E,onProgress:T,onTimeUpdate:D,onLoadedMetadata:I,autoPlay:i.autoPlay,onCanPlay:W,onWaiting:q,onLoadedData:i.onLoadedData,videoCallbacks:i.callbacks,children:i.children})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);