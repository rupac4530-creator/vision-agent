version: '3.8'
services:
  app:
    build: .
    ports:
      - "8000:8000"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - LLM_PROVIDER=${LLM_PROVIDER:-auto}
      - GEMINI_MODEL=${GEMINI_MODEL:-gemini-2.0-flash}
      - OPENAI_MODEL=${OPENAI_MODEL:-gpt-4o-mini}
      - YOLO_MODEL=${YOLO_MODEL:-yolov8n.pt}
    volumes:
      - ./backend/analysis:/app/backend/analysis
      - ./backend/frames:/app/backend/frames
      - ./backend/uploads:/app/backend/uploads
      - ./backend/stream_uploads:/app/backend/stream_uploads
    restart: unless-stopped
